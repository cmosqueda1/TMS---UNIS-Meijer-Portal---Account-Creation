<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meijer Portal Account Creation</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0f19;
  --panel:#0f1420;
  --border:#1f2937;
  --text:#e6edf6;
  --muted:#93a4b7;
  --accent:#7c3aed;
}
html,body{
  margin:0;
  height:100%;
  background:radial-gradient(1200px 800px at 0 -10%, #121a2b 0%, transparent 60%), var(--bg);
  color:var(--text);
  font-family: Inter, system-ui, sans-serif;
}
.container{
  max-width:900px;
  margin:auto;
  padding:24px;
  display:flex;
  flex-direction:column;
  height:100%;
}
.header{margin-bottom:12px}
.subtitle{
  color:var(--muted);
  white-space:pre-line;
}
.chat{
  flex:1;
  overflow-y:auto;
  padding:10px 4px;
}
.bubble{
  max-width:80%;
  padding:14px 18px;
  border-radius:18px;
  margin:10px 0;
  line-height:1.45;
  white-space:pre-wrap;
}
.user{
  margin-left:auto;
  background:linear-gradient(135deg,#7c3aed,#22d3ee);
}
.bot{
  margin-right:auto;
  background:var(--panel);
  border:1px solid var(--border);
}
.input-area{
  display:flex;
  gap:10px;
  margin-top:12px;
}
textarea{
  flex:1;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  color:var(--text);
  padding:14px;
  resize:none;
  height:90px;
}
button{
  background:var(--accent);
  border:none;
  color:white;
  padding:0 22px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
}
button:hover{filter:brightness(1.15)}
</style>
</head>

<body>
<div class="container">

  <div class="header">
    <h2>ü§ñ Meijer Portal Account Creation</h2>
    <div class="subtitle">
‚Üí You MUST provide first name, last name, email  
‚Üí You MUST provide one PO or PRO  

Paste & complete:

first_name-  
last_name-  
email-  
po-  
pro-
    </div>
  </div>

  <div id="chat" class="chat"></div>

  <div class="input-area">
    <textarea id="input" placeholder="Paste your info here..."></textarea>
    <button id="send">Submit</button>
  </div>

</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const send = document.getElementById("send");

function push(text, cls){
  const div = document.createElement("div");
  div.className = `bubble ${cls}`;
  div.textContent = text;
  chat.appendChild(div);
  div.scrollIntoView({behavior:"smooth"});
}

send.onclick = async ()=>{
  const msg = input.value.trim();
  if(!msg) return;

  input.value="";
  push(msg, "user");

  try{
    const res = await fetch("/api/tms",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ text: msg })
    });

    const raw = await res.text();

    let data;
    try{
      data = JSON.parse(raw);
    }catch{
      push("‚ùå Server returned non-JSON response:\n\n"+raw, "bot");
      return;
    }

    push(data.reply || "No response from server", "bot");

  } catch(err){
    push("‚ùå Client error:\n"+err.message, "bot");
  }
};
</script>

</body>
</html>
